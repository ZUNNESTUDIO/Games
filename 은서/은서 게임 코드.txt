<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ì í”„í•˜ëŠ” ê²Œì„ - ë¯¸ì•¼ì˜¬</title>
<style>
    body { 
        margin: 0; 
        background: #d7f0ff; 
        overflow: hidden;
        font-family: sans-serif;
    }
    #gameCanvas {
        background: #a6e3ff;
        display: block;
        margin: 0 auto;
        border: 3px solid #333;
    }
    #info {
        text-align: center;
        margin-top: 10px;
        font-size: 22px;
        font-weight: bold;
    }
</style>
</head>
<body>

<canvas id="gameCanvas" width="700" height="400"></canvas>
<div id="info">ì í”„ íšŸìˆ˜: 0 / 30</div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

// --- ê²Œì„ ìƒíƒœ ë³€ìˆ˜ ---
let miyawol = {
    x: 100,
    y: 300,
    width: 40,
    height: 60,
    vy: 0,
    gravity: 0.6,
    onGround: true
};

let obstacle = {
    x: 700,
    y: 330,
    width: 40,
    height: 40,
    speed: 5
};

let jumpCount = 0;
let gameOver = false;

// --- í‚¤ ì…ë ¥ ---
let keys = {};
document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

// --- ì í”„ ---
function jump() {
    if (miyawol.onGround) {
        miyawol.vy = -12;
        miyawol.onGround = false;
        jumpCount++;
        document.getElementById("info").innerText = `ì í”„ íšŸìˆ˜: ${jumpCount} / 30`;

        if (jumpCount >= 30) {
            alert("ğŸ‰ ê²Œì„ í´ë¦¬ì–´! ë¯¸ì•¼ì˜¬ì´ ì í”„ 30ë²ˆ ì„±ê³µí–ˆìŠµë‹ˆë‹¤!");
            gameOver = true;
        }
    }
}

// --- ê²Œì„ ë£¨í”„ ---
function update() {
    if (gameOver) return;

    // ì¢Œìš° ì´ë™
    if (keys["ArrowLeft"]) miyawol.x -= 5;
    if (keys["ArrowRight"]) miyawol.x += 5;

    // ì í”„
    if (keys["ArrowUp"]) jump();

    // ì¤‘ë ¥ ì ìš©
    miyawol.y += miyawol.vy;
    miyawol.vy += miyawol.gravity;

    if (miyawol.y > 300) {
        miyawol.y = 300;
        miyawol.vy = 0;
        miyawol.onGround = true;
    }

    // ì¥ì• ë¬¼ ì´ë™
    obstacle.x -= obstacle.speed;
    if (obstacle.x < -50) {
        obstacle.x = 700;
        obstacle.speed = 4 + Math.random() * 4; // ë‚œì´ë„ ë¯¸ì„¸ ì¦ê°€
    }

    // ì¶©ëŒ ì²´í¬
    if (miyawol.x < obstacle.x + obstacle.width &&
        miyawol.x + miyawol.width > obstacle.x &&
        miyawol.y < obstacle.y + obstacle.height &&
        miyawol.y + miyawol.height > obstacle.y) {

        alert("ğŸ’¥ ë¯¸ì•¼ì˜¬ì´ ì¥ì• ë¬¼ì— ë¶€ë”ªí˜”ìŠµë‹ˆë‹¤! ê²Œì„ ì˜¤ë²„!");
        gameOver = true;
    }
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ì í”„í•˜ëŠ” ê²Œì„ - ë¯¸ì•¼ì˜¬</title>
<style>
    body { margin: 0; background: #d7f0ff; font-family: sans-serif; text-align:center; }

    #startScreen { margin-top: 80px; }
    .difficulty-btn {
        display: block; margin: 20px auto; padding: 15px 40px;
        font-size: 22px; font-weight: bold;
        border-radius: 10px; cursor: pointer; border: none;
    }
    .easy { background: #b6f7a5; }
    .normal { background: #ffe58f; }
    .hard { background: #ff9f9f; }

    #gameCanvas {
        background: #a6e3ff;
        display: none;
        margin: 20px auto;
        border: 3px solid #333;
    }
    #info {
        font-size: 22px;
        font-weight: bold;
        display: none;
    }
</style>
</head>
<body>

<!-- ë‚œì´ë„ ì„ íƒ í™”ë©´ -->
<div id="startScreen">
    <h1>ğŸ® ì í”„í•˜ëŠ” ê²Œì„ â€” ë¯¸ì•¼ì˜¬</h1>
    <h2>ë‚œì´ë„ë¥¼ ì„ íƒí•˜ì„¸ìš”</h2>

    <button class="difficulty-btn easy" onclick="startGame('easy')">ì´ˆë³´ (ë§¤ìš° ë‹¨ìˆœ)</button>
    <button class="difficulty-btn normal" onclick="startGame('normal')">ì¤‘ìˆ˜ (ì¡°ê¸ˆ ë³µì¡)</button>
    <button class="difficulty-btn hard" onclick="startGame('hard')">ê³ ìˆ˜ (ë§¤ìš° ë³µì¡)</button>
</div>

<!-- ê²Œì„ í™”ë©´ -->
<canvas id="gameCanvas" width="700" height="400"></canvas>
<div id="info">ì í”„ íšŸìˆ˜: 0 / 30</div>

<script>
// ------------------------------
// ë¯¸ì•¼ì˜¬: ê·€ì—¬ìš´ ê³ ì–‘ì´ë¥¼ ìº”ë²„ìŠ¤ì— ì§ì ‘ ê·¸ë¦¼
// ------------------------------
function drawCat(ctx, x, y, w, h) {
    const headRadius = w * 0.4;

    // ëª¸
    ctx.fillStyle = "#ffc7c7";
    ctx.fillRect(x + w*0.2, y + h*0.5, w*0.6, h*0.5);

    // ë¨¸ë¦¬
    ctx.beginPath();
    ctx.fillStyle = "#ffb6c1";
    ctx.arc(x + w/2, y + h*0.35, headRadius, 0, Math.PI * 2);
    ctx.fill();

    // ê·€ (ì¢Œ)
    ctx.beginPath();
    ctx.moveTo(x + w*0.35, y + h*0.18);
    ctx.lineTo(x + w*0.25, y + h*0.32);
    ctx.lineTo(x + w*0.45, y + h*0.32);
    ctx.fillStyle = "#ff9eb2";
    ctx.fill();

    // ê·€ (ìš°)
    ctx.beginPath();
    ctx.moveTo(x + w*0.65, y + h*0.18);
    ctx.lineTo(x + w*0.55, y + h*0.32);
    ctx.lineTo(x + w*0.75, y + h*0.32);
    ctx.fill();

    // ëˆˆ
    ctx.fillStyle = "#000";
    ctx.beginPath();
    ctx.arc(x + w*0.42, y + h*0.35, w*0.05, 0, Math.PI*2);
    ctx.fill();

    ctx.beginPath();
    ctx.arc(x + w*0.58, y + h*0.35, w*0.05, 0, Math.PI*2);
    ctx.fill();

    // ì½”
    ctx.fillStyle = "#ff6f91";
    ctx.beginPath();
    ctx.arc(x + w*0.5, y + h*0.42, w*0.03, 0, Math.PI*2);
    ctx.fill();

    // ì…
    ctx.strokeStyle = "#ff6f91";
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(x + w*0.5, y + h*0.45);
    ctx.lineTo(x + w*0.48, y + h*0.48);
    ctx.moveTo(x + w*0.5, y + h*0.45);
    ctx.lineTo(x + w*0.52, y + h*0.48);
    ctx.stroke();
}

const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

// ë‚œì´ë„ ê°’
let difficulty = null;

// ê²Œì„ ë³€ìˆ˜
let miyawol, obstacle, jumpCount, gameOver, keys;

const DIFFICULTY_SETTINGS = {
    easy:   { speedMin: 3, speedMax: 4, respawnMin: 650 },
    normal: { speedMin: 4, speedMax: 6, respawnMin: 550 },
    hard:   { speedMin: 6, speedMax: 9, respawnMin: 450 }
};

function startGame(selected) {
    difficulty = DIFFICULTY_SETTINGS[selected];

    document.getElementById("startScreen").style.display = "none";
    canvas.style.display = "block";
    document.getElementById("info").style.display = "block";

    initializeGame();
    update();
}

function initializeGame() {
    miyawol = {
        x: 100, y: 300,
        width: 60, height: 80,
        vy: 0, gravity: 0.6,
        onGround: true
    };

    obstacle = {
        x: 700,
        y: 330,
        width: 40,
        height: 40,
        speed: getRandomSpeed()
    };

    jumpCount = 0;
    gameOver = false;
    keys = {};

    document.addEventListener("keydown", e => keys[e.key] = true);
    document.addEventListener("keyup", e => keys[e.key] = false);
}

function getRandomSpeed() {
    return difficulty.speedMin + Math.random() * (difficulty.speedMax - difficulty.speedMin);
}

function jump() {
    if (miyawol.onGround) {
        miyawol.vy = -12;
        miyawol.onGround = false;
        jumpCount++;

        document.getElementById("info").innerText = `ì í”„ íšŸìˆ˜: ${jumpCount} / 30`;

        if (jumpCount >= 30) {
            alert("ğŸ‰ ê²Œì„ í´ë¦¬ì–´! ë¯¸ì•¼ì˜¬ì´ ì í”„ 30ë²ˆ ì„±ê³µí–ˆìŠµë‹ˆë‹¤!");
            gameOver = true;
        }
    }
}

function update() {
    if (gameOver) return;

    if (keys["ArrowLeft"]) miyawol.x -= 5;
    if (keys["ArrowRight"]) miyawol.x += 5;
    if (keys["ArrowUp"]) jump();

    miyawol.y += miyawol.vy;
    miyawol.vy += miyawol.gravity;

    if (miyawol.y > 300) {
        miyawol.y = 300;
        miyawol.vy = 0;
        miyawol.onGround = true;
    }

    obstacle.x -= obstacle.speed;

    if (obstacle.x < -50) {
        obstacle.x = difficulty.respawnMin + Math.random() * 200;
        obstacle.speed = getRandomSpeed();
    }

    // ì¶©ëŒ ì²´í¬
    if (miyawol.x < obstacle.x + obstacle.width &&
        miyawol.x + miyawol.width > obstacle.x &&
        miyawol.y < obstacle.y + obstacle.height &&
        miyawol.y + miyawol.height > obstacle.y) {
        alert("ğŸ’¥ ë¯¸ì•¼ì˜¬ì´ ì¥ì• ë¬¼ì— ë¶€ë”ªí˜”ìŠµë‹ˆë‹¤! ê²Œì„ ì˜¤ë²„!");
        gameOver = true;
    }

    draw();
    requestAnimationFrame(update);
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // ğŸ± ê³ ì–‘ì´ ë¯¸ì•¼ì˜¬ ê·¸ë¦¬ê¸°
    drawCat(ctx, miyawol.x, miyawol.y, miyawol.width, miyawol.height);

    // ì¥ì• ë¬¼
    ctx.fillStyle = "#444";
    ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
}
</script>

</body>
</html>

    draw();
    requestAnimationFrame(update);
}

// --- ê·¸ë¦¬ê¸° ---
function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // ë¯¸ì•¼ì˜¬ (ìºë¦­í„°)
    ctx.fillStyle = "#ff6666";  
    ctx.fillRect(miyawol.x, miyawol.y, miyawol.width, miyawol.height);

    // ì¥ì• ë¬¼
    ctx.fillStyle = "#444";
    ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
}

update();
</script>

</body>
</html>
